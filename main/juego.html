<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Anahi</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bubblegum+Sans:wght@400;700&display=swap');
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background-color: #ffdef7;
  font-family: 'Arial', sans-serif;
  overflow-x: hidden;
  user-select: none;
}

.game-container {
  width: 900px;
  max-width: 100vw;
  margin: 20px auto;
  background: linear-gradient(180deg, #ffe6f0 0%, #fff0f7 100%);
  border-radius: 20px;
  box-shadow: 0 15px 30px rgba(255, 20, 147, 0.2);
  padding: 15px;
  position: relative;
  overflow: hidden;
}

.game-header {
  display: flex;
  justify-content: space-between;
  color: #d62878;
  font-weight: 700;
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.instructions {
  color: #8a0253;
  font-size: 0.9rem;
  text-align: center;
  margin-bottom: 15px;
  font-weight: 600;
}

.combo-indicator {
  display: none;
  position: absolute;
  top: 55px;
  left: 50%;
  transform: translateX(-50%);
  background: #d62878;
  color: white;
  font-weight: 700;
  font-size: 1.1rem;
  padding: 6px 18px;
  border-radius: 25px;
  box-shadow: 0 0 8px #ff78b6;
  user-select: none;
  z-index: 15;
}

.game-area {
  background: linear-gradient(to bottom, #f3c1db 0%, #f9e6f0 100%);
  height: 600px;
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  border: 4px solid #d62878;
  box-shadow: 0 10px 30px rgba(255, 20, 147, 0.3);
}

.rainbow {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 60px;
  background: linear-gradient(90deg, #ffb6c1, #ff69b4, #ff1493, #ff69b4, #ffb6c1);
  border-radius: 0 0 20px 20px;
  opacity: 0.3;
  pointer-events: none;
  z-index: 0;
}

.star, .cloud {
  position: absolute;
  font-size: 20px;
  animation-name: twinkle;
  animation-iteration-count: infinite;
  animation-timing-function: ease-in-out;
  user-select: none;
}

@keyframes twinkle {
  0%, 100% {opacity: 1;}
  50% {opacity: 0.3;}
}

.hello-kitty {
  position: absolute;
  bottom: 0;
  left: 400px;
  width: 100px;
  height: 120px;
  z-index: 10;
  transition: filter 0.3s ease;
}

.hello-kitty.moving {
  filter: brightness(1.1);
}

.hello-kitty-fallback {
  position: relative;
  width: 100px;
  height: 120px;
}

/* Kitty body parts */
.kitty-body {
  position: relative;
  background: white;
  width: 100px;
  height: 100px;
  border-radius: 50% 50% 40% 40% / 60% 60% 40% 40%;
  border: 3px solid #ff69b4;
  box-shadow: 0 4px 10px rgba(255, 105, 180, 0.3);
  overflow: visible;
  z-index: 10;
}

.kitty-ears {
  position: absolute;
  width: 20px;
  height: 20px;
  background: white;
  border: 3px solid #ff69b4;
  border-radius: 50% 50% 0 0;
  top: -15px;
  box-shadow: 0 2px 4px rgba(255, 105, 180, 0.3);
}

.kitty-ears.left {
  left: 15px;
  transform: rotate(-15deg);
}

.kitty-ears.right {
  right: 15px;
  transform: rotate(15deg);
}

.kitty-eyes {
  position: absolute;
  background: black;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  top: 45px;
  box-shadow: 0 0 5px #000000aa;
}

.kitty-eyes.left {
  left: 25px;
}

.kitty-eyes.right {
  right: 25px;
}

.kitty-nose {
  position: absolute;
  top: 70px;
  left: 50%;
  transform: translateX(-50%);
  width: 18px;
  height: 12px;
  background: #ff69b4;
  border-radius: 50% / 100%;
  box-shadow: 0 0 4px #ff1493;
}

.kitty-bow {
  position: absolute;
  top: 0;
  right: 5px;
  width: 40px;
  height: 40px;
  background: linear-gradient(45deg, #ff69b4 30%, #ff1493 70%);
  clip-path: polygon(50% 0%, 70% 40%, 100% 40%, 75% 60%, 85% 100%, 50% 75%, 15% 100%, 25% 60%, 0 40%, 30% 40%);
  box-shadow: 0 0 10px #ff1493;
  filter: drop-shadow(0 0 3px #ff1493);
}

.kitty-dress {
  position: absolute;
  bottom: 0;
  left: 20px;
  width: 60px;
  height: 40px;
  background: #ff69b4;
  border-radius: 30% 30% 70% 70% / 50% 50% 50% 50%;
  box-shadow: inset 0 5px 8px #ff1493;
}

/* Items (hearts, obstacles, power-ups) */
.item {
  position: absolute;
  font-size: 40px;
  top: -60px;
  user-select: none;
  pointer-events: none;
  animation-name: fall;
  animation-timing-function: linear;
  animation-fill-mode: forwards;
}

@keyframes fall {
  0% {top: -60px;}
  100% {top: 600px;}
}

.power-up {
  color: gold;
  font-size: 45px;
  text-shadow: 0 0 10px #ffd700;
}

.heart {
  color: #ff1493;
  text-shadow: 0 0 5px #ff69b4;
}

.obstacle {
  color: #800000;
  text-shadow: 0 0 7px #ff4500;
}

/* Part√≠culas */
.particle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #ff69b4;
  opacity: 0.8;
  animation-name: particle-move;
  animation-duration: 1.5s;
  animation-fill-mode: forwards;
  pointer-events: none;
}

@keyframes particle-move {
  0% {
    opacity: 0.8;
    transform: translate(0, 0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(var(--x), var(--y)) scale(0.5);
  }
}

/* Score popup */
.score-popup {
  position: absolute;
  font-weight: 700;
  color: #ff69b4;
  text-shadow: 0 0 5px #ff1493;
  font-size: 1.2rem;
  user-select: none;
  animation-name: popup-fade;
  animation-duration: 1s;
  animation-fill-mode: forwards;
  pointer-events: none;
}

@keyframes popup-fade {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-30px);
  }
}

/* Botones t√°ctiles */
.touch-controls {
  display: none;
  position: fixed;
  bottom: 25px;
  left: 50%;
  transform: translateX(-50%);
  gap: 40px;
  z-index: 20;
}

.touch-controls button {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  border: none;
  background: #ff1493;
  color: white;
  font-size: 2.2rem;
  font-weight: 900;
  box-shadow: 0 0 10px #ff69b4;
  user-select: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.touch-controls button:active {
  background: #c11471;
  box-shadow: inset 0 0 15px #c11471;
}

/* Game Over */
.game-over {
  display: none;
  position: absolute;
  top: 35%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ff69b4;
  padding: 30px 50px;
  border-radius: 20px;
  box-shadow: 0 0 25px #ff1493;
  text-align: center;
  color: white;
  font-weight: 900;
  z-index: 50;
  user-select: none;
}

.game-over h2 {
  font-size: 2.8rem;
  margin-bottom: 15px;
  text-shadow: 0 0 10px #ff1493;
}

.game-over p {
  font-size: 1.4rem;
  margin-bottom: 20px;
}

.restart-btn {
  background: white;
  color: #ff1493;
  font-weight: 900;
  font-size: 1.2rem;
  border: none;
  padding: 15px 40px;
  border-radius: 40px;
  cursor: pointer;
  box-shadow: 0 0 10px #ff69b4;
  transition: background-color 0.3s ease;
}

.restart-btn:hover {
  background: #ff1493;
  color: white;
  box-shadow: 0 0 25px #ff1493;
}

/* Responsive */
@media (max-width: 940px) {
  .game-container {
    width: 95vw;
    padding: 10px;
  }
  .hello-kitty {
    width: 80px;
    height: 100px;
  }
  .item {
    font-size: 32px;
  }
  .touch-controls button {
    width: 60px;
    height: 60px;
    font-size: 1.8rem;
  }
}

    </style>
</head>
<body>
  <div class="game-container">
    <div class="game-header">
      <div class="score">‚≠ê Puntuaci√≥n: <span id="score">0</span></div>
      <div class="level">Nivel: <span id="level">1</span></div>
      <div class="lives">Vidas: <span id="lives">3</span> üíñ</div>
    </div>

    <div class="instructions">
      üéÆ Usa ‚Üê ‚Üí o A/D o los botones para mover a Hello Kitty. ¬°Atrapa corazones, evita obst√°culos y consigue power-ups! üéÆ
    </div>

    <div class="combo-indicator" id="comboIndicator">
      üî• COMBO x<span id="comboCount">0</span> üî•
    </div>

    <div class="game-area" id="gameArea">
      <div class="rainbow"></div>

      <!-- Estrellas decorativas -->
      <div class="star" style="top: 80px; left: 100px; animation-delay: 0s;">‚≠ê</div>
      <div class="star" style="top: 150px; right: 150px; animation-delay: 1s;">‚ú®</div>
      <div class="star" style="top: 220px; left: 200px; animation-delay: 2s;">üåü</div>
      <div class="star" style="top: 300px; right: 100px; animation-delay: 0.5s;">üí´</div>
      <div class="star" style="top: 180px; left: 50px; animation-delay: 1.5s;">‚≠ê</div>

      <!-- Nubes decorativas -->
      <div class="cloud" style="top: 100px; left: 50px; animation-delay: 0s;">‚òÅÔ∏è</div>
      <div class="cloud" style="top: 200px; right: 100px; animation-delay: 3s;">‚òÅÔ∏è</div>
      <div class="cloud" style="top: 300px; left: 150px; animation-delay: 6s;">‚òÅÔ∏è</div>

      <div class="hello-kitty" id="helloKitty">
        <div class="hello-kitty-fallback" style="display: none;">
          <div class="kitty-body">
            <div class="kitty-ears left"></div>
            <div class="kitty-ears right"></div>
            <div class="kitty-eyes left"></div>
            <div class="kitty-eyes right"></div>
            <div class="kitty-nose"></div>
            <div class="kitty-bow"></div>
          </div>
          <div class="kitty-dress"></div>
        </div>
      </div>
    </div>

    <!-- Controles t√°ctiles -->
    <div class="touch-controls" id="touchControls">
      <button id="btnLeft">‚¨ÖÔ∏è</button>
      <button id="btnRight">‚û°Ô∏è</button>
    </div>

    <div class="game-over" id="gameOver">
      <h2>¬°Juego Terminado!</h2>
      <p>Puntuaci√≥n Final: <span id="finalScore">0</span></p>
      <p>Nivel Alcanzado: <span id="finalLevel">1</span></p>
      <button class="restart-btn" onclick="restartGame()">üåü ¬°Jugar de Nuevo! üåü</button>
    </div>
  </div>

    <script>
    const gameArea = document.getElementById('gameArea');
const helloKitty = document.getElementById('helloKitty');
const scoreElement = document.getElementById('score');
const livesElement = document.getElementById('lives');
const levelElement = document.getElementById('level');
const gameOverElement = document.getElementById('gameOver');
const finalScoreElement = document.getElementById('finalScore');
const finalLevelElement = document.getElementById('finalLevel');
const comboIndicator = document.getElementById('comboIndicator');
const comboCount = document.getElementById('comboCount');

let gameState = {
    score: 0,
    lives: 3,
    level: 1,
    kittyPosition: 400,
    gameRunning: true,
    items: [],
    gameSpeed: 1,
    combo: 0,
    maxCombo: 0,
    lastCollectTime: 0
};

const heartEmojis = ['üíñ', 'üíï', 'üíó', 'üíù', 'üíò', 'üíå', 'üíû', 'üíì'];
const obstacleEmojis = ['üåßÔ∏è', '‚ö°', 'üå™Ô∏è', '‚ùÑÔ∏è', 'üåä', 'üî•', '‚òÑÔ∏è', 'üåë'];
const powerUpEmojis = ['üåü', '‚ú®', 'üí´', 'üéÅ', 'üç∞', 'üßÅ', 'üéÄ', 'üëë'];

let keys = {};

// Controles del teclado mejorados
document.addEventListener('keydown', (e) => {
    keys[e.key] = true;
    if (!gameState.gameRunning) return;

    if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
        helloKitty.classList.add('moving');
    } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
        helloKitty.classList.add('moving');
    }
});

document.addEventListener('keyup', (e) => {
    keys[e.key] = false;
    helloKitty.classList.remove('moving');
});

// Controles t√°ctiles para m√≥vil (botones)
const btnLeft = document.getElementById('btnLeft');
const btnRight = document.getElementById('btnRight');

btnLeft.addEventListener('touchstart', e => {
    e.preventDefault();
    keys['ArrowLeft'] = true;
    helloKitty.classList.add('moving');
});
btnLeft.addEventListener('touchend', e => {
    e.preventDefault();
    keys['ArrowLeft'] = false;
    helloKitty.classList.remove('moving');
});
btnRight.addEventListener('touchstart', e => {
    e.preventDefault();
    keys['ArrowRight'] = true;
    helloKitty.classList.add('moving');
});
btnRight.addEventListener('touchend', e => {
    e.preventDefault();
    keys['ArrowRight'] = false;
    helloKitty.classList.remove('moving');
});

function updateMovement() {
    if (!gameState.gameRunning) return;

    let movement = 0;
    if (keys['ArrowLeft'] || keys['a'] || keys['A']) {
        movement = -5;
    }
    if (keys['ArrowRight'] || keys['d'] || keys['D']) {
        movement = 5;
    }

    if (movement !== 0) {
        moveKitty(movement);
    }
}

function moveKitty(direction) {
    const newPosition = gameState.kittyPosition + direction;
    if (newPosition >= 0 && newPosition <= 800) {
        gameState.kittyPosition = newPosition;
        helloKitty.style.left = newPosition + 'px';
    }
}

function createItem(type = 'heart') {
    const item = document.createElement('div');
    let emoji, className;

    switch(type) {
        case 'heart':
            emoji = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
            className = 'item heart';
            break;
        case 'obstacle':
            emoji = obstacleEmojis[Math.floor(Math.random() * obstacleEmojis.length)];
            className = 'item obstacle';
            break;
        case 'powerup':
            emoji = powerUpEmojis[Math.floor(Math.random() * powerUpEmojis.length)];
            className = 'power-up';
            break;
    }

    item.className = className;
    item.innerHTML = emoji;
    item.style.left = Math.random() * 800 + 'px';

    const fallDuration = Math.max(2 - gameState.gameSpeed * 0.3, 0.8);
    item.style.animationDuration = fallDuration + 's';

    gameArea.appendChild(item);
    gameState.items.push({
        element: item,
        type: type,
        x: parseInt(item.style.left),
        y: -60
    });

    setTimeout(() => {
        if (item.parentNode) {
            item.parentNode.removeChild(item);
            gameState.items = gameState.items.filter(i => i.element !== item);
        }
    }, fallDuration * 1000);
}

function createParticles(x, y, color = '#ff69b4') {
    for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        particle.style.background = color;
        particle.style.animationDelay = Math.random() * 0.5 + 's';
        gameArea.appendChild(particle);

        setTimeout(() => {
            if (particle.parentNode) {
                particle.parentNode.removeChild(particle);
            }
        }, 3000);
    }
}

function showScorePopup(x, y, points, text = '') {
    const popup = document.createElement('div');
    popup.className = 'score-popup';
    popup.innerHTML = text || `+${points}`;
    popup.style.left = x + 'px';
    popup.style.top = y + 'px';
    gameArea.appendChild(popup);

    setTimeout(() => {
        if (popup.parentNode) {
            popup.parentNode.removeChild(popup);
        }
    }, 1000);
}

function updateCombo() {
    const now = Date.now();
    if (now - gameState.lastCollectTime > 3000) {
        gameState.combo = 0;
        comboIndicator.style.display = 'none';
    }

    if (gameState.combo > 0) {
        comboCount.textContent = gameState.combo;
        comboIndicator.style.display = 'block';
    }
}

function checkCollisions() {
    const kittyRect = {
        x: gameState.kittyPosition,
        y: 500,
        width: 100,
        height: 120
    };

    gameState.items.forEach((item, index) => {
        const itemRect = item.element.getBoundingClientRect();
        const gameAreaRect = gameArea.getBoundingClientRect();

        const itemY = itemRect.top - gameAreaRect.top;

        if (itemY > 480 && itemY < 620 && 
            item.x > kittyRect.x - 30 && item.x < kittyRect.x + 100) {

            const now = Date.now();
            let points = 0;

            if (item.type === 'heart') {
                points = 10 + (gameState.combo * 2);
                gameState.score += points;
                gameState.combo++;
                gameState.lastCollectTime = now;

                if (gameState.combo > gameState.maxCombo) {
                    gameState.maxCombo = gameState.combo;
                }

                createParticles(item.x, itemY, '#ff69b4');
                showScorePopup(item.x, itemY, points);

                // Nivel up cada 100 puntos
                if (gameState.score >= gameState.level * 100) {
                    gameState.level++;
                    gameState.gameSpeed = Math.min(gameState.gameSpeed + 0.3, 4);
                    levelElement.textContent = gameState.level;
                    showScorePopup(kittyRect.x, kittyRect.y, 0, '¬°NIVEL UP!');
                }

            } else if (item.type === 'powerup') {
                points = 50;
                gameState.score += points;
                gameState.lives = Math.min(gameState.lives + 1, 5);
                livesElement.textContent = gameState.lives;

                createParticles(item.x, itemY, '#ffd700');
                showScorePopup(item.x, itemY, points, '¬°POWER UP!');

            } else {
                gameState.lives--;
                gameState.combo = 0;
                livesElement.textContent = gameState.lives;

                createParticles(item.x, itemY, '#ff0000');
                showScorePopup(item.x, itemY, 0, '¬°AUCH!');

                // Efecto de da√±o
                helloKitty.style.filter = 'brightness(0.5)';
                setTimeout(() => {
                    helloKitty.style.filter = 'brightness(1)';
                }, 300);

                if (gameState.lives <= 0) {
                    endGame();
                }
            }

            scoreElement.textContent = gameState.score;

            // Remover item
            if (item.element.parentNode) {
                item.element.parentNode.removeChild(item.element);
            }
            gameState.items.splice(index, 1);
        }
    });
}

function endGame() {
    gameState.gameRunning = false;
    finalScoreElement.textContent = gameState.score;
    finalLevelElement.textContent = gameState.level;
    gameOverElement.style.display = 'block';
    comboIndicator.style.display = 'none';
}

function restartGame() {
    gameState = {
        score: 0,
        lives: 3,
        level: 1,
        kittyPosition: 400,
        gameRunning: true,
        items: [],
        gameSpeed: 1,
        combo: 0,
        maxCombo: 0,
        lastCollectTime: 0
    };

    scoreElement.textContent = '0';
    livesElement.textContent = '3';
    levelElement.textContent = '1';
    helloKitty.style.left = '400px';
    helloKitty.style.filter = 'brightness(1)';
    gameOverElement.style.display = 'none';
    comboIndicator.style.display = 'none';

    // Limpiar items existentes
    gameState.items.forEach(item => {
        if (item.element.parentNode) {
            item.element.parentNode.removeChild(item.element);
        }
    });
    gameState.items = [];

    // Limpiar part√≠culas y popups
    const particles = document.querySelectorAll('.particle, .score-popup');
    particles.forEach(p => {
        if (p.parentNode) {
            p.parentNode.removeChild(p);
        }
    });

    startGame();
}

function gameLoop() {
    if (!gameState.gameRunning) return;

    updateMovement();
    checkCollisions();
    updateCombo();
    requestAnimationFrame(gameLoop);
}

function startGame() {
    gameLoop();

    // Crear corazones
    setInterval(() => {
        if (gameState.gameRunning && Math.random() < 0.8) {
            createItem('heart');
        }
    }, 800);

    // Crear obst√°culos
    setInterval(() => {
        if (gameState.gameRunning && Math.random() < 0.4) {
            createItem('obstacle');
        }
    }, 1200);

    // Crear power-ups
    setInterval(() => {
        if (gameState.gameRunning && Math.random() < 0.2) {
            createItem('powerup');
        }
    }, 3000);
}

// Iniciar el juego
startGame();

    </script>
</body>
</html>
